{% extends 'signlang/admin/base_admin.html' %}
{% load i18n %}

{% block title %}{% trans "Dashboard" %}{% endblock %}
{% block page_title %}{% trans "Dashboard" %}{% endblock %}

{% block content %}
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{ stats.total_users }}</div>
        <div class="stat-label">{% trans "Total Users" %}</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ stats.total_lessons }}</div>
        <div class="stat-label">{% trans "Lessons" %}</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ stats.total_videos }}</div>
        <div class="stat-label">{% trans "Videos" %}</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ stats.total_quizzes }}</div>
        <div class="stat-label">{% trans "Quizzes" %}</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ stats.total_posts }}</div>
        <div class="stat-label">{% trans "Forum Posts" %}</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" style="color: {% if stats.pending_reports > 0 %}var(--danger){% else %}var(--success){% endif %}">{{ stats.pending_reports }}</div>
        <div class="stat-label">{% trans "Pending Reports" %}</div>
    </div>
</div>

<div class="grid-2">
    <div class="card">
        <div class="card-header">
            <h3>{% trans "Recent Users" %}</h3>
            <a href="{% url 'admin_user_list' %}" class="btn btn-secondary btn-sm">{% trans "View All" %}</a>
        </div>
        <div class="card-body" style="padding: 0;">
            <table class="table">
                <thead>
                    <tr>
                        <th>{% trans "Username" %}</th>
                        <th>{% trans "Email" %}</th>
                        <th>{% trans "Joined" %}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in recent_users %}
                    <tr>
                        <td>{{ user.username }}</td>
                        <td>{{ user.email }}</td>
                        <td>{{ user.date_joined|date:"M d, Y" }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="3" style="text-align: center; color: var(--gray-500);">{% trans "No users yet" %}</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3>{% trans "Recent Forum Posts" %}</h3>
            <a href="{% url 'forum_list' %}" class="btn btn-secondary btn-sm">{% trans "View All" %}</a>
        </div>
        <div class="card-body" style="padding: 0;">
            <table class="table">
                <thead>
                    <tr>
                        <th>{% trans "Title" %}</th>
                        <th>{% trans "Author" %}</th>
                        <th>{% trans "Date" %}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for post in recent_posts %}
                    <tr>
                        <td>{{ post.title|truncatewords:5 }}</td>
                        <td>{{ post.author.username }}</td>
                        <td>{{ post.created_at|date:"M d" }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="3" style="text-align: center; color: var(--gray-500);">{% trans "No posts yet" %}</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="card mt-2">
    <div class="card-header">
        <h3>{% trans "Quick Actions" %}</h3>
    </div>
    <div class="card-body">
        <div class="flex gap-2" style="flex-wrap: wrap;">
            <a href="{% url 'admin_lesson_create' %}" class="btn btn-primary">{% trans "Add Lesson" %}</a>
            <a href="{% url 'admin_video_create' %}" class="btn btn-primary">{% trans "Add Video" %}</a>
            <a href="{% url 'admin_category_create' %}" class="btn btn-secondary">{% trans "Add Category" %}</a>
            <a href="{% url 'admin_quiz_create' %}" class="btn btn-secondary">{% trans "Add Quiz" %}</a>
        </div>
    </div>
</div>
{% endblock %}
