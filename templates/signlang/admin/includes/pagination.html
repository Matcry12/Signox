{% load i18n %}
{% if page_obj.has_other_pages %}
<div class="pagination">
    <div class="pagination-info">
        {% blocktrans with start=page_obj.start_index end=page_obj.end_index count=page_obj.paginator.count %}Showing {{ start }}-{{ end }} of {{ count }} items{% endblocktrans %}
    </div>
    <div class="pagination-controls">
        {% if page_obj.has_previous %}
        <a href="?page=1{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination-btn" title="{% trans "First" %}">
            <i class="fas fa-angle-double-left"></i>
        </a>
        <a href="?page={{ page_obj.previous_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination-btn">
            <i class="fas fa-angle-left"></i>
        </a>
        {% else %}
        <span class="pagination-btn disabled"><i class="fas fa-angle-double-left"></i></span>
        <span class="pagination-btn disabled"><i class="fas fa-angle-left"></i></span>
        {% endif %}

        <div class="pagination-pages">
            {% for num in page_obj.paginator.page_range %}
                {% if page_obj.number == num %}
                    <span class="pagination-btn active">{{ num }}</span>
                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                    <a href="?page={{ num }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination-btn">{{ num }}</a>
                {% elif num == 1 or num == page_obj.paginator.num_pages %}
                    <a href="?page={{ num }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination-btn">{{ num }}</a>
                {% elif num == page_obj.number|add:'-3' or num == page_obj.number|add:'3' %}
                    <span class="pagination-ellipsis">...</span>
                {% endif %}
            {% endfor %}
        </div>

        {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination-btn">
            <i class="fas fa-angle-right"></i>
        </a>
        <a href="?page={{ page_obj.paginator.num_pages }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination-btn" title="{% trans "Last" %}">
            <i class="fas fa-angle-double-right"></i>
        </a>
        {% else %}
        <span class="pagination-btn disabled"><i class="fas fa-angle-right"></i></span>
        <span class="pagination-btn disabled"><i class="fas fa-angle-double-right"></i></span>
        {% endif %}
    </div>
</div>

<style>
    .pagination {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1.5rem;
        padding: 1rem;
        background: var(--card-bg);
        border-radius: 10px;
        border: 1px solid var(--gray-200);
    }

    .pagination-info {
        font-size: 0.875rem;
        color: var(--gray-500);
    }

    .pagination-controls {
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }

    .pagination-pages {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        margin: 0 0.5rem;
    }

    .pagination-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 36px;
        height: 36px;
        padding: 0 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--gray-600);
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 6px;
        text-decoration: none;
        transition: all 0.15s ease;
    }

    .pagination-btn:hover:not(.disabled):not(.active) {
        background: var(--gray-100);
        border-color: var(--gray-300);
        color: var(--gray-800);
    }

    .pagination-btn.active {
        background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
        border-color: var(--primary-500);
        color: white;
    }

    .pagination-btn.disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .pagination-ellipsis {
        padding: 0 0.25rem;
        color: var(--gray-400);
    }

    @media (max-width: 640px) {
        .pagination {
            flex-direction: column;
            gap: 1rem;
        }

        .pagination-pages {
            display: none;
        }
    }
</style>
{% endif %}
